---
author: qqwerrd
comments: true
date: 2013-09-18 13:39:25+00:00
layout: post
slug: '%e6%88%91%e8%a6%81oo%e5%b0%8f%e7%b1%b3%e7%b3%bb%e7%bb%9f%e4%b8%80%e4%b8%87%e4%b8%aaxx%ef%bc%81%ef%bc%81%ef%bc%81%ef%bc%81'
title: 为什么部分小米用户在使用极简番茄时提醒会延迟
wordpress_id: 83
categories:
- 开发笔记
---

很多小米用户反馈时间会错乱，之前一直以为是后台的Activity所占用的内存被清空所致，但修改后发现仍未改善，最后终于让我找到了根本原因。

使用AlarmManager定的带有WAKEUP闹钟会被某些版本的MIUI系统推迟。

我下面用浅显的语言说明一下

每个软件都可以设置某个时间点的“闹钟”唤醒本程序，但是小米处于省电的考虑将每5分钟时间段内的“闹钟”集中在一起唤醒，例如启动番茄的25分钟后是12:31，但小米会强行将其改为12:35分，故程序的逻辑被彻底打断。

此问题在将来有可能会通过系统补丁的方式修正，但不知会是何时，身为软件作者对此只能很无奈了，

解决方案如下：

1. (推荐)刷Android官方系统或者优秀的第三方CM系统可彻底解决此问题，但有可能造成使用上的略微不便（MIUI在某些方面还是有其优点的）

2. (不推荐)使用我做的[小米专用版本](http://dacer.github.io/myapps/SimplePomodoro(MIUI).apk)，在未开启快速模式且开启屏幕常亮时理论上可正常使用（但仍不能确定），即不让屏幕锁定，(在番茄进行中点击时间可隐藏它，配合黑色全屏主题效果较佳)

3.等待小米更新系统修改这个问题。

以上。



更新又一种方式: 

http://bbs.zdworks.com/forum.php?mod=viewthread&tid=166869
